{% extends "layout.html" %}

{% block title %}Listado de Caballos{% endblock %}

{% block imports %}
    {{ super() }}  <!-- Incluye las importaciones de layout.html -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/caballo-css/index.css') }}">
{% endblock %}

{% block content %}

<body>
    <header>
        <h1>Listado de Caballos</h1>
    </header>
    <form action="{{ url_for('caballos.menu_caballos') }}" method="GET">
        <input type="text" name="nombre" placeholder="Buscar por nombre..." value="{{ request.args.get('nombre') }}">
        <button type="submit">Buscar</button>
    </form>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <ul class="flashes">
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
    <a href="{{ url_for('caballos.crear_caballo') }}">Agregar Nuevo Caballo</a>
    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Fecha Nacimiento</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for caballo in caballos.items %}
            <tr>
                <td>{{ caballo.nombre }}</td>
                <td>{{ caballo.fecha_nacimiento }}</td>
                <td>
                    <a href="{{ url_for('caballos.mostrar_caballo', id=caballo.id) }}">Ver</a>
                    <a href="{{ url_for('caballos.editar_caballo', id=caballo.id) }}">Editar</a>
                    <form action="{{ url_for('caballos.eliminar_caballo', id=caballo.id) }}" method="POST" style="display:inline;">
                        <button type="submit" onclick="return confirm('¿Está seguro que desea eliminar este caballo?')">Eliminar</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Paginación -->
    <div class="pagination">
        {% if caballos.has_prev %}
        <a href="{{ url_for('caballos.menu_caballos', page=caballos.prev_num, nombre=request.args.get('nombre')) }}">Anterior</a>
        {% endif %}
        <span>Página {{ caballos.page }} de {{ caballos.pages }}</span>
        {% if caballos.has_next %}
        <a href="{{ url_for('caballos.menu_caballos', page=caballos.next_num, nombre=request.args.get('nombre')) }}">Siguiente</a>
        {% endif %}
    </div>
</body>
{% endblock %}
